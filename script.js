document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){var a=document.createElement(t);return a.className=n,e&&e.append(a),a}function t(e,t,n,a,i){return(e-parseFloat(t))/(parseFloat(n)-parseFloat(t))*(parseFloat(i)-parseFloat(a))+parseFloat(a)}function n(e){var t=0;for(var n of e)t+=parseFloat(n[0]);var a=Math.random()*t;for(var n of(t=0,e))if(a<(t+=parseFloat(n[0])))return n[1];return e[0][1]}function a(e,t,n){var a=n;".val-count"===e&&document.querySelector(".val-type").addEventListener("change",function(){a=c(),document.querySelector(".val-count").value=Math.min(document.querySelector(".val-count").value,a)}),document.querySelectorAll(e).forEach(function(e){e.addEventListener("focusout",function(){this.value=Math.min(Math.max(this.value,t),a)})})}function i(e){var t=e/2.54;return Math.floor(t/12)+"ft "+(t=Math.round(t%12))+"in"}function o(e,t){var n=Math.random()*e,a=Math.abs(t-n)/(e/100),i=Math.pow(.9,a),o=0;for(;Math.random()>i&&((n=Math.random()*e)>e&&(n=t),a=Math.abs(t-n)/(e/100),i=Math.pow(.9,a),!(++o>=1e4)););return o<1e4?n:t}function r(e,t){var n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)}function s(e,t,n,a=1){var i=Math.random()*Math.PI*2,o=Math.pow(Math.random(),a),r=n*o+t*(1-o);return{x:Math.sin(i)*r+e.x,y:Math.cos(i)*r+e.y}}var l,h=new T;function c(){return{Worker:150,Seedling:225,Soldier:45,Drone:30,Queen:1,Hive:451}[document.querySelector(".val-type").value]||-1}var u={name:"None"};function d(e){document.querySelector(".datagrid").style.display=0==e?"":"none",document.querySelector(".tab-table").classList.toggle("tab-active",0==e),document.querySelector(".scene-container").style.display=1==e?"":"none",document.querySelector(".tab-scene").classList.toggle("tab-active",1==e)}function m(e){return(e=e.replace(/;/g,"\n").replace(/:/g,",")).split("\n").map(function(e){var t={name:(e=e.split(","))[0].trim()};"wsamfptlcveih".split("").forEach(function(e){t[e+"Mult"]=1});for(var n=1;n<e.length;n++){var a=(""+e[n]).trim(),i=a[0],o=a.substr(1);t[i+"Mult"]=parseFloat(o)}return t})}function f(e,t,n){var a=(t=(Array.isArray(t)?t:[t]).map(e=>e.name)).concat(...n.filter(e=>e.find(e=>t.includes(e))));return e.filter(e=>!a.find(t=>t==e.name))}"wsamfptlcveih".split("").forEach(function(e){u[e+"Mult"]=1}),a(".val-mutation",0,100),a(".val-luminous",0,25),a(".val-count",1,c()),a(".val-multitrait",-20,60),document.querySelectorAll(".val-mutation, .val-luminous, .val-multitrait, .val-count").forEach(function(e){var t=/^(-?0|-?[1-9]\d*|\b)$|^$/;e.addEventListener("input",function(e){var n=e.target,a=n.value;t.test(a)||(n.value=n.value.slice(0,-1))}),e.addEventListener("paste",function(e){var n=e.clipboardData.getData("text");t.test(n)||e.preventDefault()})}),document.querySelector(".tab-table").addEventListener("click",function(){d(0)}),document.querySelector(".tab-scene").addEventListener("click",function(){d(1)});var p="Big Boned:Lithe\nButterface:Handsome\nEvil:Good\nFussy Eater:Regular\nGenetic Mutation:Good Breeding\nGenius:Nice but Dim\nGiver:Taker\nImmune:Sickly\nInsane:Joyful\nLimited Efficiency:Robust\nLoyal:Surly\nOld at Heart:Young at Heart\nPlain:Handsome\nProducer:Stingy\nSickly:Immune\nSlowpoke:Hyperactive\nSmelly:Sparkling\nStingy:Producer\nStudly:Butterface\nSullen:Jovial\nSurly:Loyal\nVirile:Sickly\nWhimsical:Enigmatic\nConstipated:Regular\nGenetic Inferiority:Golden Gift\nGenetic Instability:Good Breeding\nGlistening:Smelly\nGolden Gift:Genetic Inferiority\nGood Breeding:Genetic Instability\nMysterious:Enigmatic\nPerfected:Nice but Dim\nPrize Specimen:Freak of Nature\nRadiant:Smelly\nStressed:Regular\nStrong Genes:Genetic Inferiority\nUnlucky for Some:Lucky".split("\n").map(e=>e.split(":"));const g=[];g.push(m("Missing patches of skin:h0.6;Parasites:h0.7,f0.8;Brown lumps on body:h0.5;Wrinkly skin:h0.6;Severe scarring:h0.7\nMissing vines:h0.7,p0.8;Leaking resin:h0.7,p0.8;Open wounds:h0.6;Fungal growths:h0.6;Missing teeth:h0.7,l0.8;Extra eye:h0.8\nExtra arm:h0.8;Extra leg:h0.8;Assymetry:h0.8;Malignant atavism:h0.4")),g.push(m("Minor wounds:h0.9;Discoloration:h0.9;Missing tailtip:h0.9,t0.9,l0.9;Overbite:h0.9,i0.9;Damaged vines:h0.9,p0.9,t0.9\nExtra vines:h0.9,p0.9,t0.9;Extra finger:h0.9,i0.9;Extra toe:h0.9,i0.9;Crooked teeth:h0.9,i0.9;Mites:h0.9\nExcessive salivation:h0.9;Longer tongue:h0.9,i0.9;Shorter tail:h0.9,t0.9,l0.9;Shorter limbs:h0.9,t0.9,l0.9;Straighter posture:h0.9,l0.9,t1.1")),g.push(m("Minor scarring;Dappling on face;Dappling around shoulders;Larger claws;Small horns\nDappling around hips;Neoteny;Quadruped posture;Dappling on thighs;Dewclaws on feet")),g.push(m("Leaves on vines:h1.1,v1.1,e1.1;Leaves on tail:h1.2,v1.1,e1.1;Glossy skin:h1.1;Bright eyes:h1.1;Toned:h1.1,c1.1,w1.1\nThicker thighs:h1.1,s1.1,v1.1;Longer tail:h1.1;Stronger teeth:h1.1;Vibrant coloration:h1.1")),g.push(m("Iridescent skin:h1.2;Colorful frills:h1.2;Vivid coloration:h1.2;Big head frill:h1.2,p1.2,a1.1,e1.1;Thicker arms:h1.2,c1.3\nWing-like vine frills:h1.2;Crown-like headcrest:h1.2,e1.1;Leaf cape:h1.2,e1.2;Honey golden eyes:h1.2;Bioluminescent spots:h1.2\nFeathered leaf margins:h1.2;Benign atavism:h1.2"));var y=m("Anxiety:e0.8,i0.9,h0.7;Limp:s0.8,t0.9,l1.1;ADHD:v0.9,e0.8,i0.7;Cataracts:i0.8\nPresbycusis:i0.8,e0.7;Dyspraxia:v0.9,e0.8,i0.7;Bradyphrenia:i0.8,e0.7\nMuscular Dystrophy:c0.9,s0.8,t0.9;Primary Immune Deficiency:h0.8\nShort Term Memory Loss:i0.9,e0.8;Long Term Memory Loss:i0.8,e0.8;Epilepsy:i0.9,e0.8,h0.7\nBlindness:i0.8;Deafness:i0.8;Arthritis:c0.9,s0.8,t0.9;Depression:e0.8,i0.9,h0.7;Parkinson's Syndrome:v0.9,e0.8,h0.8"),v=m("Big Boned:w1.1,l1.2,c1.3;Butterface:w1.1,s1.1,a0.9;Chatty:e1.1\nCurvy:w1.1,s0.9,a1.1;Enigmatic:i1.1;Evil:e0.9\nFearless:c1.2;Fussy Eater:w0.9,f0.9;Genetic Mutation:i1.2\nGenius:i1.5;Giver:f1.1;Good:h1.2\nHandsome:a1.1;Hyperactive:s1.1,v1.2;Immune:h1.3\nInsane:i0.9;Jovial:e1.2;Joyful:h1.1\nLimited Efficiency:c0.9;Lithe:w0.9,s1.1,a1.1,l1.1,v1.2;Lucky:f1.2\nLoyal:h1.1;Nightmare:a0.8,i0.8;Old at Heart:m1.1\nPlain:a0.9;Producer:p1.3;Robust:h1.3\nSickly:h0.9;Slowpoke:s0.9,v0.9;Smelly:a0.9\nSparkling;Stingy:f0.9;Studly:t1.3,l1.3,c1.4\nSullen:e0.8;Surly:i0.8;Taker:f0.8\nVirile:f1.3,p1.3;Whimsical:i1.2;Young at Heart:m0.9"),M=[];function b(e){return e[parseInt(Math.random()*e.length)]||u}function S(e,t){var n=t[Math.floor(Math.max(Math.min(e.attractiveness,1999),0)/400)],a=10+.05*Math.abs(1e3-e.attractiveness);return(Math.random()<a/100?n[Math.floor(Math.random()*n.length)]:void 0)||u}M.push(v.concat(m("Constipated:h0.8;Genetic Inferiority:i0.8,h0.8;Regular;Stressed:h0.9"))),M.push(v.concat(m("Charmed:h1.1;Genetic Inferiority:i0.8,h0.8;Genetic Instability:i0.9\nGlistening;Golden Gift:h1.3;Good Breeding:h1.3\nMysterious:f1.2,i1.1;Perfected:w1.1,s1.1,a1.1,m1.1,f1.1,p1.1,t1.1,l1.1,c1.1,v1.1,e1.1,i1.1,h1.1;Ravensworn:m1.1,e1.2,h1.1\nStressed:h0.9;Strong Genes:i1.2,h1.2;Unlucky for Some:f0.9,p0.9,h0.9"))),M.push(v.concat(m("Charmed:h1.1;Exalted:i1.1,h1.1;Fortunate:l1.1,c1.1\nFreak of Nature:l1.2,c1.2,e1.2;Genetic Instability:f0.8,p0.8,t0.8,l0.8,c0.8,e0.9,i0.9,h0.9;Glistening:t1.1,l1.1,c1.1,e1.1,i1.1,h1.1\nGolden Gift:h1.3;Good Breeding:h1.3;Mysterious:f1.2,i1.1\nNice but Dim:i0.9;Perfected:h1.1;Prize Specimen:w1.2,s1.2,a1.2,m1.2,f1.2,p1.2,t1.2,l1.2,c1.2,v1.2,e1.2,i1.2,h1.2\nRadiant:f1.1;Ravensworn:m1.1,e1.2,h1.1;Unlucky for Some:f0.9,p0.9,h0,9")));var x=[];function w(e,t){var n={name:e,ranges:{}};return t.split(", ").forEach((e,t)=>n.ranges[["length","height","weight","speed","age","pollenFluid","liftingCapacity","iq","activity"][t]]=e.split("-")),x.push(n),n}function k(e){for(var t of x)if(t.name==e)return t}w("Worker","150-180, 75-90, 5000-7000, 15-30, 20-22, 3-11, 4-12, 40-80, 40-50"),w("Seedling","85-100, 55-60, 1000-2000, 8-16, 0-20, 0-0, 1-3, 10-30, 20-30"),w("Soldier","300-350, 150-175, 170000-205000, 12-24, 20-360, 0-0, 200-300, 60-100, 15-25"),w("Drone","300-350, 150-175, 172000-208000, 15-30, 20-360, 67-242, 210-330, 60-90, 15-25"),w("Queen","250-270, 320-350, 500000-700000, 0-0, 360-600, 0-0, 500-700, 80-140, 60-60");var F="15:Common\n7:Shadow\n9:Igneous\n13:Cannibal\n10:Aquatic\n10:Amphibious\n11:Carrion\n12:Diseased\n11:Camouflaged\n5:Draconic\n0.33:Saradomin\n0.33:Guthix\n0.33:Zamorak".split("\n").map(function(e){return e.trim().split(":")}),j="150:Worker\n45:Soldier\n30:Drone".split("\n").map(function(e){return e.trim().split(":")}),E="age:Age\n\tjob:Type\n\ttraits:Traits\n\tattractiveness:Attractiveness@\n\tfertility:Fertility@\n\tpollenFluid:Pollen Fluid Production@\n\thandicap:Handicap\n\tvisualTraits:Visual Traits\n\theight:Height@\n\tlength:Length@\n\tweight:Weight@\n\tspeed:Top Speed@\n\tliftingCapacity:Lifting Capacity@\n\tactivity:Activity@:$ min/hr\n\tenergy:Energy@:$ hrs/day\n\tiq:IQ@\n\thealth:Health@".split("\n"),C=e(document.querySelector(".datagrid"),"tr","");function D(t){t=function(e){var t={},n="20:Weight loss\n30:Vomiting\n40:Coughing\n50:Sneezing\n60:Runny nose\n70:Eye/ear discharge\n40:Skin infection\n50:Swelling\n30:Anemia\n40:Abscesses\n60:Discharge from orifices".split("\n").map(e=>e.split(":"));t.job=(e.isMutated?"Mutated ":"")+e.gender+" "+("Seedling"==e.job.name?"Seedling\n("+e.jobAffinity.name+("Worker"==e.jobAffinity.name?", "+e.workerType:"")+")":e.job.name+("Worker"==e.job.name?", "+e.workerType:"")),t.traits=e.traits.filter(e=>"None"!=e.name).map(e=>"• "+e.name).join("\n")||"None",t.handicap=e.handicap.name,t.visualTraits=e.visualTraits.filter(e=>"None"!=e.name).map(e=>"• "+e.name).join("\n")||"None",["gender","pollenFluid"].forEach(n=>t[n]=e[n]),["age","length","height","weight","speed","attractiveness","energy","liftingCapacity","iq","activity"].forEach(function(n){t[n]=parseInt(e[n])}),t.health=n.filter(t=>e.health<t[0]).map(e=>"• "+e[1]).join("\n")||"• Healthy",t.fertility=e.fertility.toFixed(0)+(e.pregnant?"% (Pregnant)":"%"),t.age=t.age<30?t.age+" months":(t.age/12).toFixed(0)+" years",t.weight=(e.weight/1e3).toFixed(3);var a=document.querySelector(".val-metric").checked;return t.height=a?t.height+" cm":i(t.height),t.length=a?t.length+" cm":i(t.length),t.weight=a?t.weight+" kg":(2.20462*t.weight).toFixed(3)+" lbs",t.speed=a?t.speed+" km/h":parseInt(.621371*t.speed)+" mph",t.pollenFluid=e.fertileMale?t.pollenFluid.toFixed(1)+" mL":"",t.liftingCapacity=a?t.liftingCapacity+" kg":(2.20462*t.weight).toFixed(3)+" lbs","Queen"==e.job.name&&(t.weight="Unknown"),t}(t);var n=e(document.querySelector(".datagrid"),"tr","");E.forEach(function(a){var i=a.split(":"),o=i[1].split("@");i.length<3&&i.push("$");var r=i[2].replace("$",void 0===t[i[0].trim()]?"None":t[i[0].trim()]);e(n,"td",o.length>1?"num":"").innerText=r})}function q(){this.canvas=document.querySelector(".scene"),this.canvasCenter={x:this.canvas.width/2,y:this.canvas.height/2},this.pos={x:this.canvasCenter.x,y:this.canvasCenter.y},this.context=this.canvas.getContext("2d"),this.zoomRaw=1,this.zoom=1,this.settings={},this.updatePos()}function L(){l.context.clearRect(0,0,l.canvas.width,l.canvas.height),function(e){z(l,e.center.x,e.center.y,e.size,0,1,"f","#F8F8F8"),z(l,e.center.x,e.center.y,e.size,0,1,5,"#F0F0F0"),z(l,e.entrance.x,e.entrance.y,20,0,1,3,"#000"),function(e){document.querySelector(".scene").getContext("2d");e.forEach(function(e){var t={Male:{Default:"#000",Seedling:"#484",Queen:"#808",Drone:"#88F",Soldier:"#FF3000"},Female:{Default:"#444",Seedling:"#6A6",Queen:"#808",Drone:"#88F",Soldier:"#FF3000"},Herm:{Default:"#222",Seedling:"#505",Queen:"#505",Drone:"#B0B0FF",Soldier:"#FF6347"}},n=-1!=["Male","Female","Herm"].indexOf(e.gender)?e.gender:"Male";z(l,e.pos.x,e.pos.y,.1*e.height,0,1,"f",t[n][e.job.name]||t[n].Default||t.Male.Default),e.isMutated&&z(l,e.pos.x,e.pos.y,.1*e.height,0,1,3,"#840")}),l.settings.health&&e.forEach(function(e){var t=2/l.zoom,n=e.pos.y-.1*e.height-8/l.zoom+t/2,a=20/l.zoom,i=a*e.health/100,o=e.pos.x-a/2;e.pos.x;P(l,o,n,a,t,"f","#888"),P(l,o,n,i,t,"f","#800"),P(l,o,n,i,t,"f","#0F0",Math.min(e.health/100*.8,1)),P(l,o+a,n,1/l.zoom,t,"f","#222")})}(e.jadinkos)}(h)}function G(e,t,n="#000",a=1){e.context.globalAlpha=a,"f"==t?(e.context.fillStyle=n,e.context.fill()):(e.context.lineWidth=t,e.context.strokeStyle=n,e.context.stroke()),e.context.globalAlpha=1}function z(e,t,n,a,i,o,r,s="#000",l=1,h=!1){t=(t+e.drawOff1.x)*e.zoom+e.drawOff2.x,n=(n+e.drawOff1.y)*e.zoom+e.drawOff2.y,a*=h?1:e.zoom,e.context.beginPath(),e.context.arc(t,n,a,2*Math.PI*i,2*Math.PI*o),G(e,r,s,l)}function P(e,t,n,a,i,o,r="#000",s=1,l=!1){t=(t+e.drawOff1.x)*e.zoom+e.drawOff2.x,n=(n+e.drawOff1.y)*e.zoom+e.drawOff2.y,a*=l?1:e.zoom,i*=l?1:e.zoom,e.context.beginPath(),e.context.rect(t,n,a,i),G(e,o,r,s)}function T(){this.jadinkos=[],this.center={x:400,y:400},this.size=400,this.rooms={},this.rooms.nursery={x:170,y:600,size:100},this.rooms.queensChamber={x:400,y:650,size:200};this.entrance={x:400*(Math.random()-.5)+this.center.x,y:80}}function A(e){var a=this,i=M.slice().map(e=>e.slice());a.baseType=e.type,a.job=k(e.type)||x[1],a.jobAffinity="Seedling"==a.job.name?k(n(j.concat([[.045,"Queen"]]))):a.job,a.workerType="Random"!=e.breed?e.breed:n(F.concat([[.097*parseFloat(1+.01*e.luminous),"Luminous"]])),a.traits=[b(i[0]),u,u],Math.random()*(10-e.multitrait/100)<=1&&(i[1]=f(i[1],a.traits[0],p),i[2]=f(i[2],a.traits[0],p),a.traits[1]=b(i[1]),Math.random()*(10-e.multitrait/100)<=1&&(i[2]=f(i[2],a.traits[1],p),a.traits[2]=b(i[2])));var r=f(y.slice(),a.traits,p);a.handicap=Math.random()*(125-e.multitrait/100)<=1?b(r):u,a.age=t(Math.random(),0,1,a.job.ranges.age[0],a.job.ranges.age[1]),a.length=t(Math.random(),0,1,a.job.ranges.length[0],a.job.ranges.length[1]),a.height=t(Math.random(),0,1,a.job.ranges.height[0],a.job.ranges.height[1]),a.weight=t(Math.random(),0,1,a.job.ranges.weight[0],a.job.ranges.weight[1]),a.speed=t(Math.random(),0,1,a.job.ranges.speed[0],a.job.ranges.speed[1]),function(e,t){if(Math.random()<=.001||"Herm"==t)e.gender="Herm";else switch(e.jobAffinity.name){case"Queen":e.gender="Female";break;case"Drone":case"Soldier":e.gender="Male";break;default:e.gender="Random"!=t?t:Math.random()<=.5?"Male":"Female"}}(a,e.gender),a.canBePregnant="Male"!=a.gender&&"Seedling"!=a.job.name&&"Soldier"!=a.job.name,a.fertility="Seedling"!=a.job.name&&"Soldier"!=a.job.name?"Queen"==a.job.name?Math.max(o(200,100).toFixed(0),50):o(200,100).toFixed(0):0,a.attractiveness=t(Math.random(),0,1,0,2001),a.liftingCapacity=t(Math.random(),0,1,a.job.ranges.liftingCapacity[0],a.job.ranges.liftingCapacity[1]),a.iq=t(Math.random(),0,1,a.jobAffinity.ranges.iq[0],a.jobAffinity.ranges.iq[1]),a.energy=o(25,16).toFixed(0),a.activity=t(Math.random(),0,1,a.job.ranges.activity[0],a.job.ranges.activity[1]),a.fertileMale="Female"!=a.gender&&"Seedling"!=a.job.name&&"Soldier"!=a.job.name,a.health=Math.max(o(200,100).toFixed(0),1),a.isMutated=100*Math.random()<e.mutation,a.attractiveness*=("Diseased"==a.workerType?.5:1)*(a.isMutated?.2:1),a.health*=("Diseased"==a.workerType?.5:1)*(a.isMutated?.5:1),a.pollenFluid=a.fertileMale?t(Math.random(),0,1,a.job.ranges.pollenFluid[0],a.job.ranges.pollenFluid[1]):0,a.pregnant=a.canBePregnant&&("Queen"==a.job.name||Math.random()<(1+.04*a.attractiveness)*(a.fertility/100)/800),"Queen"==a.job.name&&(a.health*=1.05),a.pregnant&&"Queen"!=a.job.name&&(a.speed*=.8,a.energy*=.9,a.weight*=1.2,a.health*=1.05,a.activity*=.95,a.liftingCapacity*=.9),a.traits.concat([a.handicap]).forEach(function(e){"speed=s,weight=w,attractiveness=a,age=m,fertility=f,pollenFluid=p,height=t,length=l,liftingCapacity=c,activity=v,energy=e,iq=i,health=h".split(",").map(e=>e.split("=")).forEach(function(t){a[t[0]]*=e[t[1]+"Mult"]})});var s=f(g.slice().map(e=>e.slice()),a.traits.concat([a.handicap]),p);a.visualTraits=[u,u,u];for(var l=0;l<3&&(a.visualTraits[l]=S(a,s),s=s.map(e=>f(e,a.visualTraits[l],p)),"None"!=a.visualTraits[l].name);l++);return a.visualTraits.forEach(function(e){"speed=s,weight=w,attractiveness=a,age=m,fertility=f,pollenFluid=p,height=t,length=l,liftingCapacity=c,activity=v,energy=e,iq=i,health=h".split(",").map(e=>e.split("=")).forEach(function(t){a[t[0]]*=e[t[1]+"Mult"]})}),a.energy=Math.min(a.energy,24),a.activity=Math.min(a.activity,60),a}E.forEach(function(t){var n=t.split(":")[1].split("@");e(C,"th","").innerText=n[0]}),q.prototype.resetPos=function(){this.pos={x:this.canvasCenter.x,y:this.canvasCenter.y},this.zoomRaw=1,this.zoom=1,this.updatePos()},q.prototype.updatePos=function(){this.drawOff1={x:-this.pos.x,y:-this.pos.y},this.drawOff2={x:this.canvasCenter.x,y:this.canvasCenter.y}},l=new q,document.querySelector(".scene").addEventListener("wheel",function(e){l.zoomRaw=Math.max(l.zoomRaw+-e.deltaY/1e3,.3),l.zoom=Math.pow(l.zoomRaw,2),e.preventDefault(),L()}),document.querySelector(".scene").addEventListener("mousedown",function(e){if(0==e.button){var t={x:e.pageX,y:e.pageY},n={x:l.pos.x,y:l.pos.y};function a(e){var a=e.pageX-t.x,i=e.pageY-t.y;l.pos.x=n.x-a/l.zoom,l.pos.y=n.y-i/l.zoom,l.updatePos(),L()}document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",a)})}1==e.button&&(e.preventDefault(),l.resetPos(),L())}),document.querySelector(".val-healthbar").addEventListener("change",function(){l.settings.health=this.checked,L()}),l.settings.health=document.querySelector(".val-healthbar").checked,T.prototype.isPosDangerousForMutated=function(e){if(r(e,this.rooms.nursery)<this.rooms.nursery.size||r(e,this.rooms.queensChamber)<this.rooms.queensChamber.size)return!0;for(jadinko of this.jadinkos)if("Soldier"==jadinko.job.name&&!jadinko.isMutated&&r(e,jadinko.pos)<80)return!0;return!1},T.prototype.hideMutated=function(){for(var e of this.jadinkos)if(e.isMutated&&"Queen"!=e.job.name)for(var t=0;t<50&&this.isPosDangerousForMutated(e.pos);t++)e.pos=s({x:400,y:400},0,1200,1)},T.prototype.addJadinko=function(e){this.jadinkos.push(e),e.hive=this;var t=s({x:400,y:400},0,400,.5);if(e.pos={x:t.x,y:t.y},"Seedling"==e.job.name){var n=Math.random()<.6?this.rooms.nursery:this.rooms.queensChamber;t=s({x:n.x,y:n.y},0,.8*n.size,8);e.pos={x:t.x,y:t.y}}if("Worker"==e.job.name&&Math.random()<.7){t=s({x:400,y:400},0,800,.3);e.pos={x:t.x,y:t.y}}"Worker"==e.job.name&&(Math.random()<.7&&(e.pos=s(this.rooms.queensChamber,0,100,.5)),Math.random()<.7&&(e.pos=s({x:400,y:400},0,800,.3))),"Soldier"==e.job.name&&Math.random()<.1&&(e.pos=s(this.entrance,0,80,.5)),"Drone"==e.job.name&&(Math.random()<.8&&(e.pos=s(this.rooms.nursery,0,.5*this.rooms.nursery.size,.5)),Math.random()<.75&&(e.pos=s(this.rooms.queensChamber,0,.5*this.rooms.queensChamber.size,.5))),"Queen"==e.job.name&&(e.pos=s({x:400,y:755},0,10,1))},document.querySelector(".confirm").addEventListener("click",function(){var e={};function t(t,n,a=""){e[t]=document.querySelector(n).value||a}if(t("count",".val-count"),t("type",".val-type"),t("gender",".val-gender"),t("breed",".val-breed"),t("luminous",".val-luminous"),t("multitrait",".val-multitrait"),t("mutation",".val-mutation"),document.querySelectorAll(".datagrid tr").forEach(function(e,t){t>0&&e.remove()}),h=new T,"Hive"!=e.type)for(var a=0;a<e.count;a++)h.addJadinko(new A(e));else for(a=0;a<e.count;a++)e.type=0==a?"Queen":n(j.concat([[225,"Seedling"]])),h.addJadinko(new A(e));h.hideMutated(),h.jadinkos.forEach(function(e){D(e)}),l.resetPos(),L()})});